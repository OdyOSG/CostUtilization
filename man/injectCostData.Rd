% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/EunomiaTestHelpers.R
\name{injectCostData}
\alias{injectCostData}
\title{Inject Synthetic Payer Plan and Wide-Format Cost Data into Eunomia}
\usage{
injectCostData(connectionDetails, cdmDatabaseSchema = "main", seed = 123)
}
\arguments{
\item{connectionDetails}{An R object of type \code{ConnectionDetails} created using the
\code{DatabaseConnector} package.}

\item{cdmDatabaseSchema}{The name of the database schema that contains the OMOP CDM instance.
For Eunomia, this is typically "main".}

\item{seed}{A random seed for reproducibility of the synthetic data.}
}
\value{
Invisibly returns \code{TRUE} upon successful completion. The function is called for its side effect of modifying the database.
}
\description{
Populates the Eunomia database with synthetic \code{payer_plan_period} and \code{cost} tables.
The generated \code{cost} table is in a wide format, typical of data sources prior to OMOP CDM v5.4,
making it a suitable input for the \code{transformCostToCdmV5_5} function.
}
\details{
This function performs the following actions:
\enumerate{
\item Creates a realistic \code{payer_plan_period} table based on the observation periods of persons in Eunomia. Some persons will have continuous plans, while others will have their plans split to simulate plan changes.
\item Fetches clinical event data (procedures, drugs, visits, etc.) for all persons.
\item Generates random cost values for each event.
\item Structures these costs into a \strong{wide} \code{cost} table with columns like \code{totalCharge}, \code{totalCost}, \code{paidByPayer}, etc.
\item Inserts both the \code{payer_plan_period} and the wide \code{cost} table into the specified schema in the Eunomia database, dropping any existing tables with the same names.
}
}
\examples{
\dontrun{
connectionDetails <- Eunomia::getEunomiaConnectionDetails()
injectCostData(connectionDetails = connectionDetails)
}
}
