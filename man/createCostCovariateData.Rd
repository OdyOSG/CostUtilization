% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/resultsFormat.R
\name{createCostCovariateData}
\alias{createCostCovariateData}
\title{Create Cost Covariate Data in FeatureExtraction Format}
\usage{
createCostCovariateData(
  costResults,
  costOfCareSettings,
  cohortId,
  databaseId,
  analysisId = 1000L
)
}
\arguments{
\item{costResults}{An \code{Andromeda} object returned from \code{\link[=calculateCostOfCare]{calculateCostOfCare()}}.
Must contain a \code{results} table in either aggregated or person-level format.}

\item{costOfCareSettings}{A \code{CostOfCareSettings} object specifying the analysis
parameters (time window, concept IDs, costing approach, etc).}

\item{cohortId}{Integer. Cohort ID used for covariate construction.}

\item{databaseId}{Character. Identifier of the source database for metadata tracking.}

\item{analysisId}{Integer. Analysis ID used to generate systematic covariate IDs.
Default is \code{1000L}. Covariate IDs are constructed as \code{analysisId * 1000 + offset}.}
}
\value{
A \code{CovariateData} object (backed by an \code{Andromeda} database) with the following tables:
\itemize{
\item \strong{covariates}: person-level or cohort-level cost metrics
(\code{rowId}, \code{covariateId}, \code{covariateValue})
\item \strong{covariateRef}: mapping of covariate IDs to names and concepts
\item \strong{analysisRef}: analysis-level metadata (ID, name, domain, time window)
\item \strong{timeRef}: time-window reference (always length 1 for cost analyses)
}

Metadata about the analysis is stored in \code{attr(covariateData, "metaData")}.
}
\description{
Converts results from \code{calculateCostOfCare()} into a standardized
\href{https://ohdsi.github.io/FeatureExtraction/reference/CovariateData-class.html}{\code{CovariateData}}
object compatible with the \strong{FeatureExtraction} package and the OHDSI ecosystem.
Both \strong{aggregated} and \strong{person-level} result formats are automatically supported:
\itemize{
\item \strong{Aggregated format}: one row per metric across the full cohort, with columns
\code{metric_type}, \code{metric_name}, \code{metric_value}.
\item \strong{Person-level format}: one row per person, with at least \code{person_id} and \code{cost},
and optionally \code{adjusted_cost}.
}
}
\examples{
\dontrun{
results <- calculateCostOfCare(cohort, costOfCareSettings)
covData <- createCostCovariateData(
  costResults = results,
  costOfCareSettings = costOfCareSettings,
  cohortId = 1L,
  databaseId = "CDM_DB"
)

# Use FeatureExtraction utilities:
FeatureExtraction::summarizeCovariates(covData)
}

}
