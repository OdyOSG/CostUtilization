% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculateLos.R
\name{calculateLos}
\alias{calculateLos}
\title{Calculate Length of Stay (LOS) for a Cohort}
\usage{
calculateLos(
  connection,
  cdmDatabaseSchema,
  cohortDatabaseSchema,
  cohortTable,
  cohortId,
  anchorCol = "cohort_start_date",
  startOffsetDays = 0,
  endOffsetDays = 365,
  visitTable = c("visit_occurrence", "visit_detail"),
  visitConceptIds = c(9201),
  censorOnCohortEndDate = FALSE,
  verbose = TRUE
)
}
\arguments{
\item{connection}{A live \code{DBI} or \code{DatabaseConnector} connection object.}

\item{cdmDatabaseSchema}{The schema containing the OMOP CDM tables.}

\item{cohortDatabaseSchema}{The schema containing the cohort table.}

\item{cohortTable}{The name of the cohort table.}

\item{cohortId}{The numeric cohort definition ID to analyze.}

\item{anchorCol}{The date column in the cohort table to use as the anchor for
the time window. Must be one of \code{"cohort_start_date"} or \code{"cohort_end_date"}.}

\item{startOffsetDays}{Integer, the start day of the observation window relative to the
anchor date (e.g., 0 for the anchor date, -30 for 30 days prior).}

\item{endOffsetDays}{Integer, the end day of the observation window relative to the
anchor date (e.g., 365 for 365 days after).}

\item{visitTable}{The visit-level table to use for the calculation. Must be
one of \code{"visit_occurrence"} or \code{"visit_detail"}.}

\item{visitConceptIds}{An Integer vector of visit concept IDs}

\item{censorOnCohortEndDate}{Logical. If \code{TRUE}, the length of stay for visits
that extend beyond the \code{cohort_end_date} will be censored at the
\code{cohort_end_date}. Default is \code{FALSE}.}

\item{verbose}{A logical flag to enable or disable progress messages.}
}
\value{
A dplyr \code{tibble} with three columns: \code{person_id}, \code{visit_concept_id},
and \code{total_los_days}.
}
\description{
Calculates the length of stay (LOS) in days for visits that occur within a
specified time window relative to a cohort's anchor date. The function returns
LOS aggregated by person and visit concept type, plus a total aggregation
for each person (where \code{visit_concept_id = 0}).
}
